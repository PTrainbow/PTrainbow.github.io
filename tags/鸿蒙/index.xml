<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>鸿蒙 - 标签 - 北邙山之光的 Blog</title>
        <link>http://PTrainbow.github.io/tags/%E9%B8%BF%E8%92%99/</link>
        <description>鸿蒙 - 标签 - 北邙山之光的 Blog</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Thu, 12 Jun 2025 00:00:00 &#43;0000</lastBuildDate><atom:link href="http://PTrainbow.github.io/tags/%E9%B8%BF%E8%92%99/" rel="self" type="application/rss+xml" /><item>
    <title>Kotlin/Native 部分枚举类型在 cinterop 导出后消失</title>
    <link>http://PTrainbow.github.io/posts/Kotlin-Native-%E9%83%A8%E5%88%86%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E5%AF%BC%E5%87%BA%E5%90%8E%E6%B6%88%E5%A4%B1/</link>
    <pubDate>Thu, 12 Jun 2025 00:00:00 &#43;0000</pubDate>
    <author>作者</author>
    <guid>http://PTrainbow.github.io/posts/Kotlin-Native-%E9%83%A8%E5%88%86%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E5%AF%BC%E5%87%BA%E5%90%8E%E6%B6%88%E5%A4%B1/</guid>
    <description><![CDATA[<h2 id="背景">背景</h2>
<p>腾讯 Kuikly 开源了支持鸿蒙的 Kotlin 编译器，符号导出、字符串优化和鸿蒙 NDK 适配等很有参考价值。我们当时因 Kotlin 2.0.21 的 LLVM 限制用的是 <strong>OHOS 3.x</strong> SDK，native binding 基于 3.x 头文件生成，新版本能力用不上。借鉴 Kuikly 后想改用 <strong>Clang/LLVM 12</strong>，sysroot、链接目录等改用 <strong>OHOS 5.x</strong> SDK，以用到新能力。</p>]]></description>
</item><item>
    <title>Kotlin/Native 在 OHOS 上开启 ASAN</title>
    <link>http://PTrainbow.github.io/posts/Kotlin-Native-OHOS-ASAN-%E9%80%82%E9%85%8D/</link>
    <pubDate>Tue, 03 Jun 2025 00:00:00 &#43;0000</pubDate>
    <author>作者</author>
    <guid>http://PTrainbow.github.io/posts/Kotlin-Native-OHOS-ASAN-%E9%80%82%E9%85%8D/</guid>
    <description><![CDATA[<p>本文记录如何在适配鸿蒙的 Kotlin/Native（基于 Kotlin 2.0.21）上开启 <strong>ASAN（Address Sanitizer）</strong>。</p>
<h2 id="一asan-简介">一、ASAN 简介</h2>
<p>ASAN 是面向 C/C++ 的内存错误检测工具，运行时能发现例如：</p>]]></description>
</item><item>
    <title>KSP 生成 OHOS NAPI 代码</title>
    <link>http://PTrainbow.github.io/posts/2025-04-08-KSP/</link>
    <pubDate>Tue, 08 Apr 2025 00:00:00 &#43;0000</pubDate>
    <author>作者</author>
    <guid>http://PTrainbow.github.io/posts/2025-04-08-KSP/</guid>
    <description><![CDATA[<p>Kotlin/Native 适配鸿蒙，除了改编译器，还有一块很重要：<strong>NAPI 桥接代码的自动生成</strong>。</p>
<p><strong>Kotlin/Native 和 NAPI 的关系</strong>：</p>
<ul>
<li>Kotlin/Native 的产物是平台二进制，在 OHOS 上就是 Linux ELF。</li>
<li>OHOS 上层用 ArkTS 开发，要调 so 里的逻辑，需要一层类似 JNI 的桥，用的就是 Node.js 那套 <strong>NAPI</strong>。</li>
<li>所以「从 ArkTS 调 Kotlin/Native」= 自己写一层 NAPI 桥。</li>
</ul>
<hr>
<h2 id="一为什么需要自动生成-napi">一、为什么需要自动生成 NAPI</h2>
<p>先看一个最简例子：K/N 里有个 <code>hello_world()</code>，要在 ArkTS 里调用，就要在 C++ 里注册 NAPI：</p>]]></description>
</item><item>
    <title>Kotlin/Native 适配鸿蒙的一些梳理</title>
    <link>http://PTrainbow.github.io/posts/Kotlin-Native-%E6%A2%B3%E7%90%86/</link>
    <pubDate>Fri, 28 Mar 2025 00:00:00 &#43;0000</pubDate>
    <author>作者</author>
    <guid>http://PTrainbow.github.io/posts/Kotlin-Native-%E6%A2%B3%E7%90%86/</guid>
    <description><![CDATA[<p>最近在 Kotlin/Native 上适配鸿蒙，坑不少；而且 K/N 相当于用 Kotlin 写 C/C++，一出内存问题就挠头。另外 K/N 和 iOS / Xcode、LLVM 绑得比较紧，编译时各种版本兼容问题（比如 Kotlin 1.9.x 和 Xcode 16 不兼容）。</p>]]></description>
</item></channel>
</rss>
