<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Java æ³›å‹çš„è§è§£ - åŒ—é‚™å±±ä¹‹å…‰çš„ Blog</title><meta name="Description" content=""><meta property="og:title" content="Java æ³›å‹çš„è§è§£" />
<meta property="og:description" content="å‰è¨€ å†™ RecyclerView çš„ Adapter æ—¶ï¼Œæ„Ÿè§‰åˆ°äº†æ³›å‹ç†è§£ä¸å¤Ÿæ·±åˆ»ï¼Œä¹Ÿä¸å¤Ÿç†Ÿç»ƒï¼Œçœ‹äº†å‡ å¤©çš„æ³›å‹æ–‡æ¡£ https://docs.oracle.com/javase/tutorial/java/generics/index.html ä¸‹é¢çš„æ€»ç»“å‡æ˜¯å¯¹äºæ–‡æ¡£çš„å­¦ä¹ å’Œä¸€äº›ä»£ç ç¤ºä¾‹çš„è¿è¡Œã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://PTrain666.github.io/posts/2021-02-01-Java-%E6%B3%9B%E5%9E%8B%E7%9A%84%E8%A7%81%E8%A7%A3/" /><meta property="og:image" content="http://PTrain666.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-02-01T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://PTrain666.github.io/logo.png"/>

<meta name="twitter:title" content="Java æ³›å‹çš„è§è§£"/>
<meta name="twitter:description" content="å‰è¨€ å†™ RecyclerView çš„ Adapter æ—¶ï¼Œæ„Ÿè§‰åˆ°äº†æ³›å‹ç†è§£ä¸å¤Ÿæ·±åˆ»ï¼Œä¹Ÿä¸å¤Ÿç†Ÿç»ƒï¼Œçœ‹äº†å‡ å¤©çš„æ³›å‹æ–‡æ¡£ https://docs.oracle.com/javase/tutorial/java/generics/index.html ä¸‹é¢çš„æ€»ç»“å‡æ˜¯å¯¹äºæ–‡æ¡£çš„å­¦ä¹ å’Œä¸€äº›ä»£ç ç¤ºä¾‹çš„è¿è¡Œã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹"/>
<meta name="application-name" content="åŒ—é‚™å±±ä¹‹å…‰çš„ Blog">
<meta name="apple-mobile-web-app-title" content="åŒ—é‚™å±±ä¹‹å…‰çš„ Blog"><link rel="icon" href="/img/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="canonical" href="http://PTrain666.github.io/posts/2021-02-01-Java-%E6%B3%9B%E5%9E%8B%E7%9A%84%E8%A7%81%E8%A7%A3/" /><link rel="prev" href="http://PTrain666.github.io/posts/2021-01-24-Kotlin-Coroutines-VS-Goroutines/" /><link rel="next" href="http://PTrain666.github.io/posts/2021-02-07-%E5%B7%A5%E4%BD%9C%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E4%BB%A3%E7%A0%81%E5%8F%8D%E4%BE%8B/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Java æ³›å‹çš„è§è§£",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/PTrain666.github.io\/posts\/2021-02-01-Java-%E6%B3%9B%E5%9E%8B%E7%9A%84%E8%A7%81%E8%A7%A3\/"
        },"genre": "posts","keywords": "Java","wordcount":  2754 ,
        "url": "http:\/\/PTrain666.github.io\/posts\/2021-02-01-Java-%E6%B3%9B%E5%9E%8B%E7%9A%84%E8%A7%81%E8%A7%A3\/","datePublished": "2021-02-01T00:00:00+00:00","dateModified": "2021-02-01T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "åŒ—é‚™å±±ä¹‹å…‰"},"author": {
                "@type": "Person",
                "name": "åŒ—é‚™å±±ä¹‹å…‰"
            },"description": ""
    }
    </script><script data-ad-client="ca-pub-4814124987641317" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    </head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="åŒ—é‚™å±±ä¹‹å…‰çš„ Blog"><span class="header-title-pre"><i class='far fa-dizzy'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/about/"> å…³äº </a><a class="menu-item" href="/cv/"> ç®€å† </a><a class="menu-item" href="https://github.com/PTrain666" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="åŒ—é‚™å±±ä¹‹å…‰çš„ Blog"><span class="header-title-pre"><i class='far fa-dizzy'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/about/" title="">å…³äº</a><a class="menu-item" href="/cv/" title="">ç®€å†</a><a class="menu-item" href="https://github.com/PTrain666" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Java æ³›å‹çš„è§è§£</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>åŒ—é‚™å±±ä¹‹å…‰</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-02-01">2021-02-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2754 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 6 åˆ†é’Ÿ&nbsp;
            </div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#å‰è¨€">å‰è¨€</a></li>
    <li><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹</a>
      <ul>
        <li><a href="#ä»£ç å¤ç”¨">ä»£ç å¤ç”¨</a></li>
        <li><a href="#å‡å°‘å¼ºè½¬">å‡å°‘å¼ºè½¬</a></li>
      </ul>
    </li>
    <li><a href="#æ³›å‹ç±»æ¥å£æ–¹æ³•çš„å£°æ˜">æ³›å‹ç±»ã€æ¥å£ã€æ–¹æ³•çš„å£°æ˜</a></li>
    <li><a href="#åŸå§‹ç±»å‹raw-type">åŸå§‹ç±»å‹(Raw Type)</a></li>
    <li><a href="#æ³›å‹çš„ç»§æ‰¿å’Œå­ç±»å‹">æ³›å‹çš„ç»§æ‰¿å’Œå­ç±»å‹</a></li>
    <li><a href="#ç±»å‹æ¨æ–­type-inference">ç±»å‹æ¨æ–­(Type Inference)</a></li>
    <li><a href="#é€šé…ç¬¦wildcards">é€šé…ç¬¦(Wildcards)</a>
      <ul>
        <li><a href="#ä¸Šç•Œé€šé…ç¬¦upper-bounded-wildcards">ä¸Šç•Œé€šé…ç¬¦(Upper Bounded Wildcards)</a></li>
        <li><a href="#ä¸‹ç•Œé€šé…ç¬¦lower-bounded-wildcards">ä¸‹ç•Œé€šé…ç¬¦(Lower Bounded Wildcards)</a></li>
        <li><a href="#æ— ç•Œé€šé…ç¬¦unbounded-wildcards">æ— ç•Œé€šé…ç¬¦(unBounded Wildcards)</a></li>
        <li><a href="#å°ç»“">å°ç»“</a></li>
      </ul>
    </li>
    <li><a href="#ç±»å‹æ“¦é™¤å’Œæ¡¥æ–¹æ³•">ç±»å‹æ“¦é™¤å’Œæ¡¥æ–¹æ³•</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="å‰è¨€">å‰è¨€</h2>
<p>å†™ RecyclerView çš„ Adapter æ—¶ï¼Œæ„Ÿè§‰åˆ°äº†æ³›å‹ç†è§£ä¸å¤Ÿæ·±åˆ»ï¼Œä¹Ÿä¸å¤Ÿç†Ÿç»ƒï¼Œçœ‹äº†å‡ å¤©çš„æ³›å‹æ–‡æ¡£</p>
<p><a href="https://docs.oracle.com/javase/tutorial/java/generics/index.html" target="_blank" rel="noopener noreffer">https://docs.oracle.com/javase/tutorial/java/generics/index.html</a></p>
<p>ä¸‹é¢çš„æ€»ç»“å‡æ˜¯å¯¹äºæ–‡æ¡£çš„å­¦ä¹ å’Œä¸€äº›ä»£ç ç¤ºä¾‹çš„è¿è¡Œã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹</h2>
<h3 id="ä»£ç å¤ç”¨">ä»£ç å¤ç”¨</h3>
<p>é€šå¸¸çš„ä»£ç å¤ç”¨æ˜¯æå–ä¸€ä¸ªå…¬å…±å‚æ•°çš„å‡½æ•°ï¼Œå‡½æ•°ä¸­çš„å‚æ•°ä¼ çš„æ˜¯å„ç§ä¸åŒçš„å€¼ã€‚æ³›å‹ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œåªä¸è¿‡æ³›å‹å¯ä»¥ç”¨äºå®šä¹‰ classã€interfaceã€method ç­‰ç­‰ï¼Œæ³›å‹ä¼ é€’çš„æ˜¯ä¸åŒçš„ typeã€‚</p>
<h3 id="å‡å°‘å¼ºè½¬">å‡å°‘å¼ºè½¬</h3>
<p>å¦‚æœæ²¡æœ‰æ³›å‹ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½éœ€è¦ç±»å‹å¼ºè½¬ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨äº†æ³›å‹ä»¥åï¼Œå› ä¸ºç¼–è¯‘æ—¶æœ‰ type checkï¼Œæ‰€ä»¥è‡ªç„¶å¯ä»¥ä¸ç”¨å†™ç±»å‹å¼ºè½¬çš„ä»£ç ã€‚</p>
<h2 id="æ³›å‹ç±»æ¥å£æ–¹æ³•çš„å£°æ˜">æ³›å‹ç±»ã€æ¥å£ã€æ–¹æ³•çš„å£°æ˜</h2>
<p>åœ¨æˆ‘ä»¬å£°æ˜æ³›å‹çš„æ—¶å€™ç»å¸¸å¸¦ç€ç»‘å®šçš„ç±»å‹å‚æ•°ï¼Œæ¯”å¦‚ <code>List&lt;E&gt;</code> ç­‰ç­‰ï¼Œè¿™é‡Œçš„ E å°±æ˜¯ç±»å‹å‚æ•°ï¼Œç±»å‹å‚æ•°æœ‰ä¸€äº› <code>çº¦å®š(conventions)</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<ul>
<li>E - Element (used extensively by the Java Collections Framework)</li>
<li>K - Key</li>
<li>N - Number</li>
<li>T - Type</li>
<li>V - Value</li>
<li>S,U,V etc. - 2nd, 3rd, 4th types</li>
</ul>
<p>ä½†æ˜¯å¥½åƒå¹³æ—¶å†™çš„æ—¶å€™ï¼Œä¹Ÿå¾ˆå°‘æœ‰äººéµå®ˆã€‚æ¯”å¦‚æˆ‘å°±ç”¨è¿‡ä¸€ä¸ª <code>VH</code> çš„ç±»å‹å‚æ•°ï¼Œåªæ˜¯å› ä¸ºç»§æ‰¿äº†ä¸€ä¸ªå«åš ViewHolder çš„ç±»ï¼Œæˆ‘çš„ä½¿ç”¨å°±æ˜¯ä¸ªåä¾‹Â·Â·Â·</p>
<p>å£°æ˜æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ€è·¯æ¸…æ™°å³å¯ã€‚</p>
<p>ç»‘å®šçš„ç±»å‹å‚æ•°æœ‰ä¸€ä¸ªç‚¹ï¼Œæ”¯æŒå¤šç»‘å®š(Multiple Bounds)</p>
<p><code>T extends A &amp; B &amp; C</code></p>
<h2 id="åŸå§‹ç±»å‹raw-type">åŸå§‹ç±»å‹(Raw Type)</h2>
<p>åŸå§‹ç±»å‹åœ¨ JDK 5.0 çš„æ—¶å€™æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬ä½¿ç”¨åŸå§‹ç±»å‹ç¼–è¯‘å™¨å‡ä¼šæŠ¥ warningï¼Œ<code>Raw use of parameterized class 'ItemViewBinder' </code></p>
<p>æ‰€ä»¥åŸå§‹ç±»å‹æ˜¯ä¸å»ºè®®ä½¿ç”¨çš„ï¼Œä½†æ˜¯æˆ‘ä»¬çš„å„ç§æ³›å‹è½®å­ä¸­å¯èƒ½å……æ–¥ç€ warningï¼Œè™½ç„¶è¿è¡Œæ—¶ <code>å¯èƒ½</code> ä¸å­˜åœ¨é—®é¢˜ï¼Œä½†æ˜¯å…¶å®æ˜¯ä¸è§„èŒƒçš„ã€‚</p>
<p>å› ä¸ºä½¿ç”¨åŸå§‹ç±»å‹ç»•è¿‡äº†ç¼–è¯‘å™¨çš„ç±»å‹æ£€æŸ¥ï¼Œè€Œè®©ä½ çš„ä»£ç å˜å¾—ä¸å†å®‰å…¨ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µè¢«å„ç§æ³›å‹æ–‡ç« ç”¨çƒ‚äº†çš„ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">List</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span> <span class="c1">// warning: raw type!
</span><span class="c1"></span><span class="n">names</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;John&#34;</span><span class="o">);</span>
<span class="n">names</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;Mary&#34;</span><span class="o">);</span>
<span class="n">names</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Boolean</span><span class="o">.</span><span class="na">FALSE</span><span class="o">);</span> <span class="c1">// not a compilation error!
</span><span class="c1"></span><span class="k">for</span> <span class="o">(</span><span class="n">Object</span> <span class="n">o</span> <span class="o">:</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
<span class="o">}</span> <span class="c1">// throws ClassCastException!
</span><span class="c1"></span>  <span class="c1">//    java.lang.Boolean cannot be cast to java.lang.String
</span></code></pre></div><p>ä¸Šé¢ä»£ç ä½¿ç”¨äº†åŸå§‹ç±»å‹ Listï¼Œç»•è¿‡äº†ç¼–è¯‘å™¨çš„æ£€æŸ¥ï¼Œä½ å¯ä»¥åŠ å…¥ä»»ä½•ç±»å‹ï¼Œä½†æ˜¯å½“ä½ å–å‡º List ä¸­çš„å…ƒç´ æ—¶ï¼Œå´å®Œå…¨ä¸çŸ¥é“ç±»å‹ï¼Œå¾ˆå®¹æ˜“å°±ä¼šäº§ç”Ÿ ClassCastExceptionã€‚</p>
<h2 id="æ³›å‹çš„ç»§æ‰¿å’Œå­ç±»å‹">æ³›å‹çš„ç»§æ‰¿å’Œå­ç±»å‹</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/in-post/generics-subtypeRelationship.gif"
        data-srcset="/img/in-post/generics-subtypeRelationship.gif, /img/in-post/generics-subtypeRelationship.gif 1.5x, /img/in-post/generics-subtypeRelationship.gif 2x"
        data-sizes="auto"
        alt="/img/in-post/generics-subtypeRelationship.gif"
        title="/img/in-post/generics-subtypeRelationship.gif" /></p>
<p>å¯ä»¥çœ‹åˆ° <code>Integer extends Number</code>ï¼Œä½†æ˜¯ <code>Box&lt;Integer&gt;</code> å’Œ <code>Box&lt;Number&gt;</code> å´ä¸æ˜¯ç»§æ‰¿å…³ç³»ã€‚</p>
<p>çœ‹çœ‹ä¸‹é¢çš„ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Integer</span><span class="o">[]</span> <span class="n">integers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">[</span><span class="n">0</span><span class="o">];</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">integerList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">testGenericInheritance</span><span class="o">(</span><span class="n">integerList</span><span class="o">);</span> <span class="c1">// compile error
</span><span class="c1"></span>    <span class="n">testArrayInheritance</span><span class="o">(</span><span class="n">integers</span><span class="o">);</span> <span class="c1">// ok
</span><span class="c1"></span><span class="o">}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">testArrayInheritance</span><span class="o">(</span><span class="n">Number</span><span class="o">[]</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">testGenericInheritance</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="n">integerList</span><span class="o">)</span> <span class="o">{}</span>
</code></pre></div><p>è¿™ä¹Ÿæ˜¯å¸¸è¯´çš„ java æ•°ç»„æ˜¯ <code>åå˜(covariant)</code> çš„ï¼Œä½†æ˜¯è¿™ä¹ˆçœ‹æ³›å‹å°±ä¸è¡Œäº†ï¼Ÿä¹Ÿä¸æ˜¯ï¼Œ<code>é€šé…ç¬¦(Wildcards)</code> å¸®æˆ‘ä»¬å®Œæˆè¿™ä»¶äº‹ã€‚</p>
<p>è¿˜æ˜¯ä¸Šé¢çš„ä»£ç ï¼Œæ”¹ä¸€ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Integer</span><span class="o">[]</span> <span class="n">integers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">[</span><span class="n">0</span><span class="o">];</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">integerList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">testGenericInheritance</span><span class="o">(</span><span class="n">integerList</span><span class="o">);</span> <span class="c1">// ok
</span><span class="c1"></span><span class="o">}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">testGenericInheritance</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">integerList</span><span class="o">)</span> <span class="o">{}</span>
</code></pre></div><p>è¿™æ ·å°±ç¼–è¯‘é€šè¿‡äº†ã€‚</p>
<p>ä½†æ˜¯ä¸ºä»€ä¹ˆ <code>List&lt;Integer&gt;</code> å´ä¸æ˜¯ <code>List&lt;Number&gt;</code> çš„å­ç±»å‘¢ï¼Ÿåœ¨è¯­ä¹‰å±‚é¢å’Œæ•°å­¦é€»è¾‘çœ‹å®Œå…¨æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>å¯èƒ½æ˜¯å®³æ€•è¿™ç§è¯­ä¹‰çš„å‡ºç°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">integerList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="n">numberList</span> <span class="o">=</span> <span class="n">integerList</span><span class="o">;</span>
    <span class="n">numberList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">0f</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><p>å¦‚æœ <code>List&lt;Integer&gt; æ˜¯ List&lt;Number&gt;</code> çš„å­ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>List&lt;Number&gt; æ¥æ”¶ List&lt;Integer&gt;</code>ï¼Œå¤šæ€çš„ä½“ç°ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼ŒnumberList.add(double) å®Œå…¨æ­£ç¡®ï¼Œä½†æ˜¯ List ç¡®æ˜¯ Integerï¼Œäº’ç›¸çŸ›ç›¾ã€‚</p>
<h2 id="ç±»å‹æ¨æ–­type-inference">ç±»å‹æ¨æ–­(Type Inference)</h2>
<p>çœ‹çœ‹ä¸‹é¢çš„ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Serializable</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pick</span><span class="o">(</span><span class="s">&#34;d&#34;</span><span class="o">,</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;());</span> <span class="c1">// ok
</span><span class="c1"></span>    <span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">pick</span><span class="o">(</span><span class="s">&#34;d&#34;</span><span class="o">,</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;());</span> <span class="c1">// compile error
</span><span class="c1"></span>    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">pick</span><span class="o">(</span><span class="s">&#34;d&#34;</span><span class="o">,</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;());</span> <span class="c1">// compile error
</span><span class="c1"></span><span class="o">}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">pick</span><span class="o">(</span><span class="n">T</span> <span class="n">a1</span><span class="o">,</span> <span class="n">T</span> <span class="n">a2</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">a2</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div><p>å½“ä½¿ç”¨æ³›å‹æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åšç±»å‹æ¨å¯¼ï¼Œ</p>
<h2 id="é€šé…ç¬¦wildcards">é€šé…ç¬¦(Wildcards)</h2>
<p>é€šé…ç¬¦ç›¸å…³çš„å­ç±»å‹å…³ç³»å¦‚ä¸‹å›¾ï¼š</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/in-post/generics-wildcardSubtyping.gif"
        data-srcset="/img/in-post/generics-wildcardSubtyping.gif, /img/in-post/generics-wildcardSubtyping.gif 1.5x, /img/in-post/generics-wildcardSubtyping.gif 2x"
        data-sizes="auto"
        alt="/img/in-post/generics-wildcardSubtyping.gif"
        title="/img/in-post/generics-wildcardSubtyping.gif" /></p>
<p>æ‰€ä»¥å½“ä½¿ç”¨é€šé…ç¬¦æ—¶ï¼Œæ˜¯å­˜åœ¨ç»§æ‰¿å…³ç³»çš„ã€‚</p>
<h3 id="ä¸Šç•Œé€šé…ç¬¦upper-bounded-wildcards">ä¸Šç•Œé€šé…ç¬¦(Upper Bounded Wildcards)</h3>
<p><code>? extends Type</code> å³ä¸ºä¸Šç•Œé€šé…ç¬¦</p>
<p>çœ‹ä¸‹é¢è¿™æ®µä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">numbers2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">1</span><span class="o">);</span> <span class="c1">// compile error
</span><span class="c1"></span>    <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Object</span><span class="o">());</span> <span class="c1">// compile error
</span><span class="c1"></span>    <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span> <span class="c1">// ok
</span><span class="c1"></span>    <span class="n">numbers2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">numbers2</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">));</span> <span class="c1">// compile error
</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p>ä¸€ç›´éƒ½æœ‰ä¸€ç§æ€ç»´å®šå¼ï¼Œåƒä»£ç ä¸­çš„ numbers åº”è¯¥æ˜¯å­˜å‚¨ Number ä»¥åŠ Numbers å­ç±»ã€‚</p>
<p>ä½†æ˜¯ add(1) å´ç¼–è¯‘æŠ¥é”™äº†ï¼Œadd(Object) ä¹ŸæŠ¥é”™äº†ï¼Œç”šè‡³æˆ‘åˆ›å»ºäº†å’Œ numbers ä¸€æ¨¡ä¸€æ ·çš„ numbers2ï¼Œadd(numbers2.get(0)) ä¹Ÿç¼–è¯‘æŠ¥é”™ã€‚</p>
<p>è¿™éƒ½æ˜¯ç¼–è¯‘å™¨ä½œç”¨çš„ä½“ç°ï¼Œä½¿ç”¨äº†é€šé…ç¬¦åï¼Œ<code>List&lt;? extends Number&gt;</code> åœ¨ç¼–è¯‘å™¨çœ¼ä¸­ï¼Œå®ƒçš„å…ƒç´ ç±»å‹æ˜¯ <code>CAP#1</code>ï¼Œåº”è¯¥æ˜¯ç¼–è¯‘å™¨æŒ‰é¡ºåºå®šçš„ä¸€ä¸ªå€¼ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬çŸ¥é“äº†ï¼Œä¸Šç•Œé€šé…ç¬¦æ˜¯æ— æ³•æ·»åŠ ä»»ä½•å…ƒç´ çš„(null é™¤å¤–)ï¼Œæ‰€ä»¥å¾ˆå¤šæ–‡ç« ä¹Ÿè¯´äº†å®ƒæ˜¯ <code>åªè¯»</code> ç±»å‹ï¼Œå¦‚æœä½ æƒ³éšæ„æ”¹åŠ¨é‚£ä¹ˆç›´æ¥ä½¿ç”¨ <code>List&lt;Number&gt;</code>ã€‚</p>
<p>ä½†æ˜¯åˆè¦è®°ä½ä¹‹å‰çš„ä¾‹å­ï¼Œåœ¨ Java ä¸­ <code>List&lt;Number&gt; å’Œ List&lt;Integer&gt; å’Œ List&lt;Double&gt;</code> æ²¡ä»»ä½•ç»§æ‰¿å…³ç³»ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³å†™ä¸€æ®µé€šç”¨é€»è¾‘ï¼Œå¤„ç† <code>List&lt;Number&gt; å’Œ List&lt;Integer&gt; å’Œ List&lt;Double&gt;</code> ä¸­çš„ Number å…ƒç´ ï¼Œè¿˜æ˜¯é€ƒä¸å¼€ä½¿ç”¨é€šé…ç¬¦ã€‚</p>
<h3 id="ä¸‹ç•Œé€šé…ç¬¦lower-bounded-wildcards">ä¸‹ç•Œé€šé…ç¬¦(Lower Bounded Wildcards)</h3>
<p><code>? super Type</code> å³ä¸ºä¸‹ç•Œé€šé…ç¬¦</p>
<p>çœ‹ä¸‹é¢è¿™æ®µä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">List</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">numbers2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">1</span><span class="o">);</span> <span class="c1">// ok
</span><span class="c1"></span>    <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="k">new</span> <span class="kt">byte</span><span class="o">[]{}));</span> <span class="c1">// ok
</span><span class="c1"></span>    <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Object</span><span class="o">());</span> <span class="c1">// compile error
</span><span class="c1"></span>    <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span> <span class="c1">// ok
</span><span class="c1"></span>    <span class="n">numbers2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">numbers2</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">));</span> <span class="c1">// compile error
</span><span class="c1"></span>    <span class="n">Number</span> <span class="n">num1</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">);</span> <span class="c1">// compile error
</span><span class="c1"></span>    <span class="n">Object</span> <span class="n">num2</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">0</span><span class="o">);</span> <span class="c1">// ok
</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p>ä½¿ç”¨ä¸‹ç•Œé€šé…ç¬¦å¯ä»¥ add Number å­ç±»å…ƒç´ ï¼Œä½†æ˜¯ get è¯»å–çš„æ—¶å€™å´åªèƒ½ç”¨ Object ç±»æ¥æ”¶ã€‚</p>
<h3 id="æ— ç•Œé€šé…ç¬¦unbounded-wildcards">æ— ç•Œé€šé…ç¬¦(unBounded Wildcards)</h3>
<p>ï¼Ÿ å³ä¸ºæ— ç•Œé€šé…ç¬¦</p>
<p><code>List&lt;?&gt;</code> å’Œ <code>List&lt;Object&gt;</code> å´ä¸ç›¸åŒï¼Œ<code>List&lt;?&gt;</code> åŒæ ·åªèƒ½æ·»åŠ  null ä½œä¸ºå…ƒç´ </p>
<h3 id="å°ç»“">å°ç»“</h3>
<p>ä¸Šç•Œé€šé…ç¬¦é€šå¸¸ä»£è¡¨äº†åªè¯»ï¼Œè€Œä¸‹ç•Œé€šé…ç¬¦è¡¨ç¤ºäº†å¯å†™(å½“ç„¶ä¹Ÿå¯è¯»ï¼Œä½†æ˜¯æ˜¯ Object)ã€‚</p>
<p>è¿™é‡Œè¯´ä¸€è¯´ï¼Œ<code>åå˜(covariant)</code> å’Œ <code>é€†å˜(contravariant)</code></p>
<ul>
<li>ğ‘“(â‹…)æ˜¯é€†å˜ï¼ˆcontravariantï¼‰çš„ï¼Œå½“ğ´â‰¤ğµæ—¶æœ‰ğ‘“(ğµ)â‰¤ğ‘“(ğ´)æˆç«‹ï¼›</li>
<li>ğ‘“(â‹…)æ˜¯åå˜ï¼ˆcovariantï¼‰çš„ï¼Œå½“ğ´â‰¤ğµæ—¶æœ‰ğ‘“(ğ´)â‰¤ğ‘“(ğµ)æˆç«‹ï¼›</li>
<li>ğ‘“(â‹…)æ˜¯ä¸å˜ï¼ˆinvariantï¼‰çš„ï¼Œå½“ğ´â‰¤ğµæ—¶ä¸Šè¿°ä¸¤ä¸ªå¼å­å‡ä¸æˆç«‹ï¼Œå³ğ‘“(ğ´)ä¸ğ‘“(ğµ)ç›¸äº’ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ã€‚</li>
</ul>
<p>æ‰€ä»¥é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œä½¿ç”¨é€šé…ç¬¦åã€‚</p>
<p>ä¸Šç•Œé€šé…ç¬¦å®ç°äº†åå˜ï¼Œä¸‹ç•Œé€šé…ç¬¦å®ç°äº†é€†å˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="n">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>
<span class="n">List</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;();</span>
</code></pre></div><h2 id="ç±»å‹æ“¦é™¤å’Œæ¡¥æ–¹æ³•">ç±»å‹æ“¦é™¤å’Œæ¡¥æ–¹æ³•</h2>
<p>é¦–å…ˆ Java çš„æ³›å‹æ˜¯ <code>ç¼–è¯‘å™¨(compiler)</code> åœ¨ <code>ç¼–è¯‘æ—¶</code> å¸®æˆ‘ä»¬åšçš„ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥å®ç°çš„ï¼Œä¸ä¹‹å¯¹åº”çš„å°±æ˜¯ <code>ç±»å‹æ“¦é™¤(Type Erasure)</code> å’Œ æˆ‘ä»¬ç»å¸¸è¯´çš„ <code>ä¼ªæ³›å‹</code>ï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å£°æ˜çš„ç±»å‹å‚æ•°éƒ½ä¼šè¢«æ“¦é™¤æ‰ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œç¼–è¯‘å™¨å°±ä»€ä¹ˆä¹Ÿæ²¡æœ‰åšäº†ä¹ˆï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œç¼–è¯‘å™¨ä¹Ÿè®¸è¿˜ä¼šå¸®æˆ‘ä»¬ç”Ÿæˆæ¡¥æ–¹æ³•ã€‚</p>
<p>çœ‹è¿™æ®µä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="n">T</span> <span class="n">data</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Node</span><span class="o">(</span><span class="n">T</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">;</span> <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setData</span><span class="o">(</span><span class="n">T</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Node.setData&#34;</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyNode</span> <span class="kd">extends</span> <span class="n">Node</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">MyNode</span><span class="o">(</span><span class="n">Integer</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span> <span class="kd">super</span><span class="o">(</span><span class="n">data</span><span class="o">);</span> <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setData</span><span class="o">(</span><span class="n">Integer</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;MyNode.setData&#34;</span><span class="o">);</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">MyNode</span> <span class="n">mn</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyNode</span><span class="o">(</span><span class="n">5</span><span class="o">);</span>
<span class="n">Node</span> <span class="n">n</span> <span class="o">=</span> <span class="n">mn</span><span class="o">;</span>            <span class="c1">// A raw type - compiler throws an unchecked warning
</span><span class="c1"></span><span class="n">n</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="s">&#34;Hello&#34;</span><span class="o">);</span>     
<span class="n">Integer</span> <span class="n">x</span> <span class="o">=</span> <span class="n">mn</span><span class="o">.</span><span class="na">data</span><span class="o">;</span>    <span class="c1">// Causes a ClassCastException to be thrown.
</span></code></pre></div><p>è¿™æ®µä»£ç ç¡®å®æœ‰é—®é¢˜ï¼Œä½†æ˜¯æ˜¯å› ä¸º setData è°ƒç”¨äº† Node çš„ setData(Object data)(ç±»å‹æ“¦é™¤ä»¥åï¼Œ T å˜ä¸º Object) æ–¹æ³•ï¼Œä»è€Œå¯¼è‡´ Node.data = Stringï¼Œè€Œ mn åˆæ˜¯ MyNode ç±»å‹(<code>extends Node&lt;Integer&gt;</code>)ï¼Œæ‰€ä»¥ Integer x = mn.dataï¼Œç¼–è¯‘å¹¶æ²¡æœ‰é—®é¢˜ï¼Œæœ€ç»ˆè¿è¡Œæ—¶æŠ¥é”™ï¼ŒæŠ¥é”™åœ¨äº† mn.data å¼ºè½¬ String ä¸Šï¼ŒæŠ¥é”™ä¹Ÿè®©äººå¾ˆå›°æƒ‘ï¼Œä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆã€‚ä¸”æˆ‘ä»¬ä»¥ä¸ºæ˜¯é‡å†™äº† setData æ–¹æ³•ï¼Œå…¶å®ä¸ç„¶ï¼Œç›´æ¥è°ƒç”¨çš„çˆ¶ç±»çš„ setData æ–¹æ³•ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬ç”Ÿæˆæ¡¥æ–¹æ³•ã€‚</p>
<p>é€šè¿‡ javap -v MyNode.class æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° MyNode ä¸­å±…ç„¶å¤šäº†ä¸€ä¸ª setData(Object) æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setData</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Integer</span><span class="o">);</span>
    <span class="n">descriptor</span><span class="o">:</span> <span class="o">(</span><span class="n">Ljava</span><span class="o">/</span><span class="n">lang</span><span class="o">/</span><span class="n">Integer</span><span class="o">;)</span><span class="n">V</span>
    <span class="n">flags</span><span class="o">:</span> <span class="n">ACC_PUBLIC</span>
    <span class="n">Code</span><span class="o">:</span>
      <span class="n">stack</span><span class="o">=</span><span class="n">2</span><span class="o">,</span> <span class="n">locals</span><span class="o">=</span><span class="n">2</span><span class="o">,</span> <span class="n">args_size</span><span class="o">=</span><span class="n">2</span>
         <span class="n">0</span><span class="o">:</span> <span class="n">aload_0</span>
         <span class="n">1</span><span class="o">:</span> <span class="n">aload_1</span>
         <span class="n">2</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="n">2</span>                  <span class="c1">// Method Node.setData:(Ljava/lang/Object;)V
</span><span class="c1"></span>         <span class="n">5</span><span class="o">:</span> <span class="k">return</span>
      <span class="n">LineNumberTable</span><span class="o">:</span>
        <span class="n">line</span> <span class="n">18</span><span class="o">:</span> <span class="n">0</span>
        <span class="n">line</span> <span class="n">19</span><span class="o">:</span> <span class="n">5</span>
      <span class="n">LocalVariableTable</span><span class="o">:</span>
        <span class="n">Start</span>  <span class="n">Length</span>  <span class="n">Slot</span>  <span class="n">Name</span>   <span class="n">Signature</span>
            <span class="n">0</span>       <span class="n">6</span>     <span class="n">0</span>  <span class="k">this</span>   <span class="n">LMyNode</span><span class="o">;</span>
            <span class="n">0</span>       <span class="n">6</span>     <span class="n">1</span>  <span class="n">data</span>   <span class="n">Ljava</span><span class="o">/</span><span class="n">lang</span><span class="o">/</span><span class="n">Integer</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setData</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Object</span><span class="o">);</span>
    <span class="n">descriptor</span><span class="o">:</span> <span class="o">(</span><span class="n">Ljava</span><span class="o">/</span><span class="n">lang</span><span class="o">/</span><span class="n">Object</span><span class="o">;)</span><span class="n">V</span>
    <span class="n">flags</span><span class="o">:</span> <span class="n">ACC_PUBLIC</span><span class="o">,</span> <span class="n">ACC_BRIDGE</span><span class="o">,</span> <span class="n">ACC_SYNTHETIC</span>
    <span class="n">Code</span><span class="o">:</span>
      <span class="n">stack</span><span class="o">=</span><span class="n">2</span><span class="o">,</span> <span class="n">locals</span><span class="o">=</span><span class="n">2</span><span class="o">,</span> <span class="n">args_size</span><span class="o">=</span><span class="n">2</span>
         <span class="n">0</span><span class="o">:</span> <span class="n">aload_0</span>
         <span class="n">1</span><span class="o">:</span> <span class="n">aload_1</span>
         <span class="n">2</span><span class="o">:</span> <span class="n">checkcast</span>     <span class="err">#</span><span class="n">3</span>                  <span class="c1">// class java/lang/Integer
</span><span class="c1"></span>         <span class="n">5</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">4</span>                  <span class="c1">// Method setData:(Ljava/lang/Integer;)V
</span><span class="c1"></span>         <span class="n">8</span><span class="o">:</span> <span class="k">return</span>
      <span class="n">LineNumberTable</span><span class="o">:</span>
        <span class="n">line</span> <span class="n">13</span><span class="o">:</span> <span class="n">0</span>
      <span class="n">LocalVariableTable</span><span class="o">:</span>
        <span class="n">Start</span>  <span class="n">Length</span>  <span class="n">Slot</span>  <span class="n">Name</span>   <span class="n">Signature</span>
            <span class="n">0</span>       <span class="n">9</span>     <span class="n">0</span>  <span class="k">this</span>   <span class="n">LMyNode</span><span class="o">;</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬ç»™ MyNode ç”Ÿæˆäº†ä¸€ä¸ª setData(Object) æ–¹æ³•ï¼Œä»è€Œå®ç°äº†æˆ‘ä»¬è°ƒç”¨ setData(&ldquo;Hello&rdquo;) æ—¶ï¼Œè°ƒç”¨çš„æ˜¯å…·ä½“çš„å­ç±»çš„ setData(Object) æ–¹æ³•è€Œä¸æ˜¯çˆ¶ç±»çš„æ–¹æ³•ã€‚åŒæ—¶ï¼ŒsetData æ–¹æ³•å†…éƒ¨å¼ºè½¬ç±»å‹ Integerï¼Œç„¶åè°ƒç”¨äº† setData(Integer) æ–¹æ³•ã€‚</p>
<p>è™½ç„¶æœ€ç»ˆä»£ç è¿˜æ˜¯æŠ¥é”™ï¼Œä½†æ˜¯å…¶ç¬¦åˆé€»è¾‘ï¼ŒæŠ¥é”™ä½ç½®ä¹Ÿåœ¨ setData ä¸­ï¼Œè°ƒç”¨çš„ä¹Ÿæ˜¯è‡ªå·±çš„ setData è€Œä¸æ˜¯çˆ¶ç±»çš„ setDataã€‚</p>
<p>æ‰€ä»¥å¾ˆå¤šæ—¶å€™ï¼Œç¼–è¯‘å™¨æœ‰ç€ç¥å¥‡çš„ä½œç”¨ã€‚</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2021-02-01</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/Java/">Java</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/2021-01-24-Kotlin-Coroutines-VS-Goroutines/" class="prev" rel="prev" title="Kotlin Coroutines VS Goroutines"><i class="fas fa-angle-left fa-fw"></i>Kotlin Coroutines VS Goroutines</a>
            <a href="/posts/2021-02-07-%E5%B7%A5%E4%BD%9C%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E4%BB%A3%E7%A0%81%E5%8F%8D%E4%BE%8B/" class="next" rel="next" title="å·¥ä½œä¸­é‡åˆ°çš„ä»£ç åä¾‹">å·¥ä½œä¸­é‡åˆ°çš„ä»£ç åä¾‹<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.87.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><script type="text/javascript" src="/lib/gitalk/gitalk.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/typeit/typeit.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":10},"comment":{"gitalk":{"admin":["PTrain666"],"clientID":"2266a6b1be9e64aca6b8","clientSecret":"95a87d5d16492501b3629046e7d5689bb5f949bf","id":"2021-02-01T00:00:00Z","owner":"PTrain666","repo":"PTrain666.github.io","title":"Java æ³›å‹çš„è§è§£"}},"data":{"id-1":"åŒ—é‚™å±±ä¹‹å…‰çš„ Blog","id-2":"åŒ—é‚™å±±ä¹‹å…‰çš„ Blog"},"search":{"algoliaAppID":"DY3IPG94HO","algoliaIndex":"blog","algoliaSearchKey":"e9b70bb1815b657ef5122006a8a499b6","highlightTag":"em","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"algolia"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
