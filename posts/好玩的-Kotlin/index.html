<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>å¥½ç©çš„ Kotlin - åŒ—é‚™å±±ä¹‹å…‰çš„ Blog</title><meta name="Description" content=""><meta property="og:title" content="å¥½ç©çš„ Kotlin" />
<meta property="og:description" content="â€‹ å‰è¨€ åˆå¥½ä¹…å¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œä¸»è¦æ˜¯æœ€è¿‘ç ”ç©¶çš„ä¸œè¥¿å¯¹æˆ‘æ¥è¯´éƒ½æ¯”è¾ƒéš¾ï¼Œå†…åŠŸä¸å¤Ÿ çš„æƒ…å†µä¸‹ï¼Œå†™ä¸å‡ºä¸œè¥¿æ¥ã€‚ C/C&#43;&#43; è¢«æˆ‘æš‚æ—¶æç½®äº† æœ€è¿‘æœ¬æ¥æ˜¯æ‰“ç®—æ¡èµ·æ¥ C&#43;&#43; çš„(ä¹Ÿ" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://PTrainbow.github.io/posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/" /><meta property="og:image" content="http://PTrainbow.github.io/posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/gujian.jpg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-12T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-05-12T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://PTrainbow.github.io/posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/gujian.jpg"/>
<meta name="twitter:title" content="å¥½ç©çš„ Kotlin"/>
<meta name="twitter:description" content="â€‹ å‰è¨€ åˆå¥½ä¹…å¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œä¸»è¦æ˜¯æœ€è¿‘ç ”ç©¶çš„ä¸œè¥¿å¯¹æˆ‘æ¥è¯´éƒ½æ¯”è¾ƒéš¾ï¼Œå†…åŠŸä¸å¤Ÿ çš„æƒ…å†µä¸‹ï¼Œå†™ä¸å‡ºä¸œè¥¿æ¥ã€‚ C/C&#43;&#43; è¢«æˆ‘æš‚æ—¶æç½®äº† æœ€è¿‘æœ¬æ¥æ˜¯æ‰“ç®—æ¡èµ·æ¥ C&#43;&#43; çš„(ä¹Ÿ"/>
<meta name="application-name" content="åŒ—é‚™å±±ä¹‹å…‰çš„ Blog">
<meta name="apple-mobile-web-app-title" content="åŒ—é‚™å±±ä¹‹å…‰çš„ Blog"><link rel="icon" href="/img/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="canonical" href="http://PTrainbow.github.io/posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/" /><link rel="prev" href="http://PTrainbow.github.io/posts/%E6%96%AD%E6%9B%B4%E4%BA%86/" /><link rel="next" href="http://PTrainbow.github.io/posts/%E5%86%8D%E7%9C%8B-Kotlin-Coroutines/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "å¥½ç©çš„ Kotlin",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/PTrainbow.github.io\/posts\/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "http:\/\/PTrainbow.github.io\/posts\/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin\/gujian.jpg",
                            "width":  1600 ,
                            "height":  1018 
                        }],"genre": "posts","keywords": "Android","wordcount":  2547 ,
        "url": "http:\/\/PTrainbow.github.io\/posts\/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin\/","datePublished": "2021-05-12T00:00:00+00:00","dateModified": "2021-05-12T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "åŒ—é‚™å±±ä¹‹å…‰"},"author": {
                "@type": "Person",
                "name": "åŒ—é‚™å±±ä¹‹å…‰"
            },"description": ""
    }
    </script><script data-ad-client="ca-pub-4814124987641317" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    </head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="åŒ—é‚™å±±ä¹‹å…‰çš„ Blog"><span class="header-title-pre"><i class='far fa-dizzy'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/about/"> å…³äº </a><a class="menu-item" href="https://github.com/PTrainbow" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="åŒ—é‚™å±±ä¹‹å…‰çš„ Blog"><span class="header-title-pre"><i class='far fa-dizzy'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/about/" title="">å…³äº</a><a class="menu-item" href="https://github.com/PTrainbow" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">å¥½ç©çš„ Kotlin</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>åŒ—é‚™å±±ä¹‹å…‰</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-05-12">2021-05-12</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2547 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 6 åˆ†é’Ÿ&nbsp;
            </div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/gujian.jpg"
        data-srcset="/posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/gujian.jpg, /posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/gujian.jpg 1.5x, /posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/gujian.jpg 2x"
        data-sizes="auto"
        alt="/posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/gujian.jpg"
        title="/posts/%E5%A5%BD%E7%8E%A9%E7%9A%84-Kotlin/gujian.jpg" /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#å‰è¨€">å‰è¨€</a>
      <ul>
        <li><a href="#cc-è¢«æˆ‘æš‚æ—¶æç½®äº†">C/C++ è¢«æˆ‘æš‚æ—¶æç½®äº†</a></li>
        <li><a href="#çœ‹äº†-jetpack-compose">çœ‹äº† Jetpack Compose</a></li>
        <li><a href="#æ„Ÿè§‰å®¢æˆ·ç«¯å¥½åƒå…¨æ˜¯åŠ£åŠ¿">æ„Ÿè§‰å®¢æˆ·ç«¯å¥½åƒå…¨æ˜¯åŠ£åŠ¿</a></li>
        <li><a href="#ç»“æœæ˜¯-compose-æ²¡çœ‹é€">ç»“æœæ˜¯ Compose æ²¡çœ‹é€</a></li>
      </ul>
    </li>
    <li><a href="#kotlin-functions-are-first-class">Kotlin Functions Are First-Class</a></li>
    <li><a href="#passing-trailing-lambdas">Passing Trailing Lambdas</a></li>
    <li><a href="#type-safe-builders">Type-safe Builders</a></li>
    <li><a href="#æ›´å¤šçš„æ€è€ƒ">æ›´å¤šçš„æ€è€ƒ</a></li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>â€‹</p>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>åˆå¥½ä¹…å¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œä¸»è¦æ˜¯æœ€è¿‘ç ”ç©¶çš„ä¸œè¥¿å¯¹æˆ‘æ¥è¯´éƒ½æ¯”è¾ƒéš¾ï¼Œå†…åŠŸä¸å¤Ÿ çš„æƒ…å†µä¸‹ï¼Œå†™ä¸å‡ºä¸œè¥¿æ¥ã€‚</p>
<h3 id="cc-è¢«æˆ‘æš‚æ—¶æç½®äº†">C/C++ è¢«æˆ‘æš‚æ—¶æç½®äº†</h3>
<p>æœ€è¿‘æœ¬æ¥æ˜¯æ‰“ç®—æ¡èµ·æ¥ C++ çš„(ä¹Ÿ Hello World äº†ä¸€ä¸‹ Rustï¼Œè¿™ä¸ªè¯­è¨€æ„Ÿè§‰å¯¹äºä»¥å‰å†™ Java çš„äººæ¥è¯´ï¼Œ çœ‹èµ·æ¥ç†è§£èµ·æ¥éƒ½å¥½åˆ«æ‰­å•ŠÂ·Â·Â·)ã€‚</p>
<p>çœ‹äº†ä¸¤å¤©ï¼Œæ„Ÿè§‰å¾ˆæ¯ç‡¥ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆç»ƒæ‰‹é¡¹ç›®ï¼Œç›²ç›®çš„å­¦æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚è€Œä¸” C++ çš„ä»£ç é£æ ¼ï¼Œäººå’Œäººåˆä¸åŒï¼Œå…³é”®å­—åˆå¾ˆå¤šï¼Œæœ€ç»ˆæ²¡èƒ½æ²‰ä¸‹å¿ƒæ¥çœ‹å®Œï¼Œæš‚ä¸”æç½®äº†ã€‚</p>
<h3 id="çœ‹äº†-jetpack-compose">çœ‹äº† Jetpack Compose</h3>
<p>åŒæ—¶ï¼Œç ”ç©¶äº†ä¸€ä¸ªæ˜ŸæœŸçš„ Jetpack Composeï¼Œæˆ‘è§‰å¾—è¿™ä¸ªæ˜¯æŒºçˆ½çš„ï¼Œå®¢æˆ·ç«¯ç»ˆäºå‰è¿›åˆ°äº†å£°æ˜å¼ UI äº†ï¼</p>
<p>ç»ˆäºä¸ç”¨å†™ xmlï¼Œç„¶åå† findViewByIdï¼Œå† setLayoutParams/setVisibility äº†ï¼Œè™½ç„¶å‰ç«¯æŠŠè¿™äº›éƒ½å·²ç»ç©çƒ‚æ‰äº†Â·Â·Â·</p>
<h3 id="æ„Ÿè§‰å®¢æˆ·ç«¯å¥½åƒå…¨æ˜¯åŠ£åŠ¿">æ„Ÿè§‰å®¢æˆ·ç«¯å¥½åƒå…¨æ˜¯åŠ£åŠ¿</h3>
<p>çªç„¶æ„Ÿè§‰å®¢æˆ·ç«¯æ·¡æ·¡çš„å¿§æ¡‘ï¼š</p>
<ul>
<li>1.å¼€å‘æ•ˆç‡ä½ï¼Œä»£ç è¦å‘ç‰ˆ</li>
<li>2.crash äº†å°±åªèƒ½æŠ±å¤´ç—›å“­ï¼Œæˆ–è€…å‘ patch</li>
<li>3.ä¸æ–­è¢«å‰ç«¯ä¾µèš€ï¼Œæ— è®ºæ˜¯ Hybrid è¿˜æ˜¯ç›´æ¥è·¨ç«¯ã€‚è¿™ä¹Ÿæ˜¯å› ä¸ºä¸Šé¢ä¸¤ç‚¹çš„æ•ˆç‡é—®é¢˜å§ï¼ŒH5 éƒ½å¯ä»¥å®Œç¾æå®šã€‚å”¯ä¸€èƒ½åæ§½ H5 çš„å°±æ˜¯è¯´ä½“éªŒä¸å¥½ã€‚ä½†æ˜¯ï¼Œå…¶å®ä½ çœ‹å¾®ä¿¡å°ç¨‹åºï¼Œä½“éªŒå¾ˆå·®ä¹ˆï¼Ÿä¸è§‰å¾—ã€‚</li>
</ul>
<p>å¿«è¦æ²¡é¥­ç¢—äº†ğŸ˜­ï¼Œæ‰€ä»¥æ˜¯ä¸æ˜¯ç ”ç©¶ä¸€æ³¢å‰ç«¯å‘¢ï¼Ÿæ˜¯ä¸æ˜¯åˆå­¦çš„å¤ªæ‚äº†ï¼Œä¸€é¡¿ä¹±çœ‹ï¼Œæˆ‘éœ€è¦ä¸€é—¨ç»æ´»Â·Â·Â·</p>
<h3 id="ç»“æœæ˜¯-compose-æ²¡çœ‹é€">ç»“æœæ˜¯ Compose æ²¡çœ‹é€</h3>
<p>æœ¬æ¥æƒ³å†™ Compose çš„æ¸²æŸ“è¿‡ç¨‹çš„ï¼Œä½†æ˜¯å‘ç°è‡ªå·±ç†è§£ä¸å¤Ÿæ·±åˆ»(æ€•å†™é”™)ï¼Œè€Œä¸”è§†è§’ä¸å¤Ÿå®è§‚ï¼Œæ²¡æœ‰å½»åº•ææ‡‚è¿™ä¸ªä¸œè¥¿çš„è®¾è®¡ï¼Œåªæ˜¯é  debug æ–­ç‚¹åœ¨çŒœæµ‹æ•´ä¸ªæ¸²æŸ“æµç¨‹ï¼Œæ‰€ä»¥æ²¡æ•¢ä¸‹ç¬”Â·Â·Â·</p>
<p>ä¸»è¦ç²¾é«“ï¼šå°±æ˜¯å°† View çš„å‚æ•°å’Œæè¿°(æ”¹å˜çš„æ–¹å¼) è½¬æ¢æˆäº†ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åé€šè¿‡è§‚å¯Ÿæ•°æ®å˜åŒ–ï¼Œé‡æ–°æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™å…¶ä¸­è‚¯å®šæœ‰å¾ˆå¤šå¤æ‚çš„é€»è¾‘ï¼Œè€Œä¸”è®¸å¤šä»£ç æ˜¯ ç¼–è¯‘æ—¶ç”Ÿæˆçš„ï¼Œå…·ä½“çš„æºç ä¸€æ—¶åŠä¼šäº†è§£ä¸å…¨ã€‚
åŒæ—¶ï¼Œæ¸²æŸ“è¿‡ç¨‹ä¹Ÿé‡å†™äº†(ä¹Ÿæ²¡å®Œå…¨é‡å†™ï¼Œç”¨äº†ä¸€ä¸ªç©ºå£³çš„ Viewï¼Œç¡¬ä»¶åŠ é€Ÿçš„æƒ…å†µä¸‹ï¼ŒåŸºäº RenderNode æ¥æ)ï¼Œä¹ŸåŒ…æ‹¬äº‹ä»¶åˆ†å‘çš„ä»£ç ä¿®æ”¹ç­‰ç­‰Â·Â·Â·</p>
<p>æ€»ä¹‹ï¼Œå†…åŠŸä¸å¤Ÿï¼Œç†è§£ä¸é€ï¼Œæš‚æ—¶è¿˜æ²¡å‘çºµè§ˆå…¨å±€ï¼Œä¹Ÿå°±ä¸‹ä¸äº†ç¬”ã€‚</p>
<p>è€Œä¸” Kotlin ä¸å¤ªç†Ÿï¼Œä¹Ÿç»™æˆ‘çœ‹æºç æ„æˆäº†ä¸€äº›å°éšœç¢ï¼</p>
<p>é‚£ç°åœ¨æ–°çš„ Android çš„ä¸œè¥¿éƒ½æ˜¯åŸºäº Kotlin æ¥å†™çš„ï¼Œä¸å…¶ç ”ç©¶ C/C++ã€Vue/Reactï¼Œä¸å¦‚å…ˆå¥½å¥½å­¦å­¦ Kotlinï¼Œè€Œä¸”æˆ‘çš„ Kotlin åŠŸåº•æŒºå·®çš„ã€‚</p>
<p>å¥½åœ¨æœ‰ä¸€ä¸ª Kotlin å¤§ç¥åŒäº‹åœ¨ï¼Œå·å·çœ‹ä»–å†™çš„ä»£ç ï¼Œéå¸¸çš„ Kotlin Styleï¼Œé»˜é»˜çš„å­¦äº†å­¦ã€‚</p>
<h2 id="kotlin-functions-are-first-class">Kotlin Functions Are First-Class</h2>
<p>æ¯”å¦‚ï¼Œæˆ‘çœ‹åˆ°äº†å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">private</span> <span class="k">fun</span> <span class="nf">GrowthTestLayout</span><span class="p">.</span><span class="n">inflate</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">apply</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">space</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl">      <span class="n">title</span><span class="p">(</span><span class="s2">&#34;åº”ç”¨ä¿¡æ¯&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">inflateAppInfo</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl">      <span class="n">title</span><span class="p">(</span><span class="s2">&#34;æ‰‹æœºä¿¡æ¯&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">inflateMobileInfo</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl">      <span class="n">title</span><span class="p">(</span><span class="s2">&#34;è®¾å¤‡é‡ç½®&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">action</span><span class="p">(</span><span class="s2">&#34;è®¾ç½®æ–°æœºï¼ˆçœŸæœºä½“éªŒï¼‰ &gt;&gt;&#34;</span><span class="p">)</span> <span class="p">{</span> <span class="n">context</span><span class="p">.</span><span class="n">startTestNewDeviceActivity</span><span class="p">()</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">action</span><span class="p">(</span><span class="s2">&#34;æ¸…é™¤åº”ç”¨æ•°æ®&#34;</span><span class="p">)</span> <span class="p">{</span> <span class="n">TestNewDeviceUtils</span><span class="p">.</span><span class="n">showClearDataDialog</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">action</span><span class="p">(</span><span class="s2">&#34;æ‰‹æœºåƒåœ¾æ¸…ç†&#34;</span><span class="p">)</span> <span class="p">{</span> <span class="n">context</span><span class="p">.</span><span class="n">startGrowthCleanerActivity</span><span class="p">()</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>è¿™ä¸ªå°±å¾ˆæœ‰æ„æ€äº†ï¼Œå†™èµ·æ¥æ¸…æ™°å¤šäº†ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ª RecyclerViewï¼Œä¸€ä¸ª function å¯¹åº”ä¸€ä¸ª itemï¼Œå¹¶ä¸”ä¼š inflate å¯¹åº”çš„å¸ƒå±€æ–‡ä»¶ã€‚å½“ç„¶ï¼ŒåŒäº‹ä¹Ÿä¸ºäº†æ›´é€šç”¨ï¼Œå£°æ˜äº† action ç­‰è®¸å¤šå‡½æ•°ï¼Œè¿™é‡Œçš„ action å°±æ˜¯æœ€ç»ˆå½“ onClick å‡½æ•°ä¼ äº†è¿‡å»ã€‚</p>
<p>èƒ½è½»æ¾çš„åšè¿™äº›ï¼Œä¹Ÿæ˜¯å› ä¸ºåœ¨ Kotlin ä¸­å‡½æ•°å¯ä»¥ä½œä¸ºä¸€ç­‰å…¬æ°‘äº†ï¼Œå¼•ç”¨ Kotlin å®˜æ–¹æ–‡æ¡£çš„æè¿°(ä¹Ÿæœ‰ä¸­æ–‡çš„ï¼Œä½†æ˜¯æ„Ÿè§‰ç¿»è¯‘çš„æœ‰ç‚¹è¯¡å¼‚)ï¼š</p>
<blockquote>
<p>Kotlin functions are first-class, which means that they can be stored in variables and data structures, passed as arguments to and returned from other higher-order functions. You can operate with functions in any way that is possible for other non-function values. To facilitate this, Kotlin, as a statically typed programming language, uses a family of function types to represent functions and provides a set of specialized language constructs, such as lambda expressions.</p>
</blockquote>
<h2 id="passing-trailing-lambdas">Passing Trailing Lambdas</h2>
<p>è¿™ä¸ªç¿»è¯‘çš„å«åš ä¼ é€’æœ«å°¾çš„ lambda è¡¨è¾¾å¼ï¼Œå¾ˆå¤šåœ°æ–¹ä½¿ç”¨åˆ°ã€‚
å°±æ˜¯å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ç±»å‹æ˜¯ä¸ª å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å¯ä»¥æ”¾åˆ°åœ†æ‹¬å·ä¹‹å¤–ã€‚
eg:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="c1">// å‡½æ•°å£°æ˜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">fun</span> <span class="nf">test</span><span class="p">(</span><span class="n">param1</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">param2</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Unit</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å‡½æ•°ä½¿ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">test</span><span class="p">(</span><span class="s2">&#34;param1&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å‡½æ•°ä½“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>å¦‚æœæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå‚æ•°ä¸”æ˜¯å‡½æ•°ç±»å‹ï¼Œåœ†æ‹¬å·éƒ½å¯ä»¥çœç•¥ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="c1">// å‡½æ•°å£°æ˜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">fun</span> <span class="nf">test</span><span class="p">(</span><span class="k">param</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Unit</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å‡½æ•°ä½¿ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">test</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å‡½æ•°ä½“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>åŒæ—¶ï¼Œè®°ä½ itï¼šå•ä¸ªå‚æ•°çš„éšå¼åç§°</p>
<h2 id="type-safe-builders">Type-safe Builders</h2>
<p>çœ‹äº†åŠå¤© Kotlin æ–‡æ¡£ï¼Œå‘ç°äº† Type-safe Builders è¿™ä¸ªç« èŠ‚ï¼Œå‘ç°ä¸¾ä¾‹ä»£ç å¾ˆåƒåŒäº‹å†™çš„ä»£ç ï¼ŒåŸç†å…¶å®ä¾ç„¶æ˜¯ä¾é ä¹‹å‰è¯´çš„ functions are first-class è¿™ä¸€ç‚¹ã€‚</p>
<p>åŒæ—¶ Kotlin ä¹Ÿæ”¯æŒ Extension Functionsï¼Œå°±æ˜¯å¯ä»¥ç»™ä¸€ä¸ªç±»å¢åŠ ä¸€ä¸ªé¢å¤–æ–¹æ³•ã€‚
è¿™ä¸ªæˆ‘ä¾ç¨€çš„è®°å¾— OC ä¸€ç›´éƒ½æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Ÿå¯¹äº C ç³»è¯­è¨€ï¼Œæ€ä¹ˆå®ç°çš„è¿™ä¸ªå‘¢ï¼Ÿåæ­£åœ¨ Kotlin ä¸­è¿™åªæ˜¯ä¸ª è¯­æ³•ç³– è€Œå·²ã€‚</p>
<p>Type-safe Builders ç« èŠ‚ä¸¾ä¾‹äº†ä¸€äº› DSLï¼Œæ¯”å¦‚ HTML å’Œ Anko è¿™ä¸¤ä¸ªåº“ã€‚</p>
<p>Anko ä¹Ÿæ˜¯ä¸€å¼€å§‹ç”¨äºæ‘†è„± XML çš„ï¼Œä½†æ˜¯ç°åœ¨å‘å±•æˆå•¥æ ·äº†ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚</p>
<p>æˆ‘ä¹Ÿç»ƒäº†ç»ƒæ‰‹ï¼Œè‡ªå·±å†™äº†ä¸ª æå…¶ç®€é™‹ä¸”ä¸‘é™‹ çš„ DSLï¼Œåº”è¯¥æ˜¯ç±»ä¼¼ Anko çš„ï¼Œæˆ‘å¹¶æ²¡æœ‰çœ‹å®ƒçš„æºç å“ˆï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="n">row</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl">  <span class="n">layout</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">.</span><span class="n">MATCH_PARENT</span><span class="p">,</span> <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="n">WRAP_CONTENT</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl">  <span class="n">text</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">text</span> <span class="p">=</span> <span class="s2">&#34;hello world 1&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">textSize</span> <span class="p">=</span> <span class="m">16f</span>
</span></span><span class="line"><span class="cl">    <span class="n">gravity</span> <span class="p">=</span> <span class="n">Gravity</span><span class="p">.</span><span class="n">CENTER</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>ä¸çŸ¥é“æœ€é¡¶å±‚çš„ context æ€ä¹ˆå¤„ç†ï¼Œæ‰€ä»¥æˆ‘å¹²è„†ä¼ äº†ä¸ª this(Activity) è¿›å»ã€‚</p>
<p>æœ€å¥½ç©çš„åœ°æ–¹åœ¨äº row è¿™ä¸ªå‡½æ•°æ˜¯æ€ä¹ˆå®šä¹‰çš„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Row</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="p">:</span> <span class="n">ViewGroupDSL</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">init</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">orientation</span> <span class="p">=</span> <span class="n">HORIZONTAL</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å…¶å®å°±æ˜¯ä¸ª LinearLayout
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">open</span> <span class="k">class</span> <span class="nc">ViewGroupDSL</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="p">:</span> <span class="n">LinearLayout</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">fun</span> <span class="nf">layout</span><span class="p">(</span><span class="n">function</span> <span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">layoutParams</span> <span class="p">=</span> <span class="n">function</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl"><span class="c1">// row å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">fun</span> <span class="nf">row</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Row</span><span class="p">.()</span> <span class="o">-&gt;</span> <span class="n">Unit</span><span class="p">):</span><span class="n">Row</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">row</span> <span class="p">=</span> <span class="n">Row</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">row</span><span class="p">.</span><span class="n">body</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">row</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>è¿™é‡Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Contextï¼Œå…¶å® Row extends LinearLayout æ‰€ä»¥éœ€è¦ä¸€ä¸ª Context ä½œä¸ºå‚æ•°
æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸ª Row çš„ Extension Functionï¼ŒåŒæ—¶æ ¹æ®å‰é¢è¯´çš„ Trailing Lambdaï¼Œå‡½æ•°ä½“å¯ä»¥è¢«æ”¾åˆ°å¤–é¢(ä¸” this æ˜¯ Row)ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="n">row</span><span class="p">(</span><span class="n">params1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å‡½æ•°ä½“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// this = Row
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">```</span><span class="n">kotlin</span>
</span></span><span class="line"><span class="cl"><span class="n">åˆå› ä¸º</span> <span class="k">this</span> <span class="n">æ˜¯</span> <span class="n">Row</span><span class="err">ï¼Œ</span><span class="n">åˆå¯ä»¥ç»™</span> <span class="n">Row</span> <span class="n">å¢åŠ å‡ ä¸ªæ–¹æ³•</span><span class="err">ï¼Œ</span><span class="n">æ¯”å¦‚åŠ ä¸€ä¸ª</span> <span class="n">text</span> <span class="n">æ–¹æ³•</span><span class="p">(</span><span class="n">è¿™é‡Œä¸çŸ¥é“</span> <span class="n">params</span> <span class="n">æ€ä¹ˆä¼ è¿‡å»æ¯”è¾ƒå¥½</span><span class="err">ï¼Œ</span><span class="n">è‡ªå·±å†™äº†ä¸€ä¸ªå¾ˆæŒ«çš„åŠæ³•</span><span class="err">ï¼š</span><span class="n">è¿˜æ˜¯ä¼ </span> <span class="n">function</span><span class="p">)</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">```</span><span class="n">kotlin</span>
</span></span><span class="line"><span class="cl"><span class="c1">// åŠ ä¸€ä¸ªé€šç”¨çš„ text æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">open</span> <span class="k">class</span> <span class="nc">ViewGroupDSL</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="p">:</span> <span class="n">LinearLayout</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å¢åŠ ä¸€ä¸ª text æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">fun</span> <span class="nf">text</span><span class="p">(</span><span class="n">body</span><span class="p">:</span> <span class="n">Text</span><span class="p">.()</span> <span class="o">-&gt;</span> <span class="n">Unit</span><span class="p">):</span> <span class="n">Text</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">textView</span> <span class="p">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">textView</span><span class="p">.</span><span class="n">body</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">addView</span><span class="p">(</span><span class="n">textView</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">textView</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Row extends ViewGroupDSL extends LinearLayout
</span></span></span><span class="line"><span class="cl"><span class="c1">// orientation HORIZONTAL
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Row</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="p">:</span> <span class="n">ViewGroupDSL</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">init</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">orientation</span> <span class="p">=</span> <span class="n">HORIZONTAL</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Text</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="p">:</span> <span class="n">AppCompatTextView</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// åŠ ä¸€ä¸ª click æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">fun</span> <span class="nf">click</span><span class="p">(</span><span class="n">onclick</span> <span class="p">:</span> <span class="p">(</span><span class="n">View</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Unit</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">setOnClickListener</span><span class="p">(</span><span class="n">onclick</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1">// åŠ ä¸€ä¸ª layout æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">fun</span> <span class="nf">layout</span><span class="p">(</span><span class="n">function</span> <span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">layoutParams</span> <span class="p">=</span> <span class="n">function</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">äºæ˜¯æˆ‘å°±å¯ä»¥è¿™æ ·è°ƒç”¨</span>
</span></span><span class="line"><span class="cl"><span class="n">row</span><span class="p">(</span><span class="n">params1</span><span class="p">,</span> <span class="n">params2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// row æœ¬èº«çš„å‚æ•°ï¼Œæ„Ÿè§‰è¿™ä¹ˆä¼ å‚æ•°å¾ˆæŒ«
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">layout</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">(</span><span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">.</span><span class="n">MATCH_PARENT</span><span class="p">,</span> <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">.</span><span class="n">WRAP_CONTENT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// text æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">text</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// this å°±æ˜¯ TextView
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">text</span> <span class="p">=</span> <span class="s2">&#34;hello world 1&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">textSize</span> <span class="p">=</span> <span class="m">20f</span>
</span></span><span class="line"><span class="cl">    <span class="n">gravity</span> <span class="p">=</span> <span class="n">Gravity</span><span class="p">.</span><span class="n">CENTER</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// text çš„ layout paramsï¼Œæ„Ÿè§‰å¾ˆæŒ«
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">layout</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">val</span> <span class="py">layoutParams</span> <span class="p">=</span> <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">LinearLayout</span><span class="p">.</span><span class="n">LayoutParams</span><span class="p">.</span><span class="n">WRAP_CONTENT</span><span class="p">,</span> <span class="n">LinearLayout</span>
</span></span><span class="line"><span class="cl">          <span class="p">.</span><span class="n">LayoutParams</span><span class="p">.</span><span class="n">WRAP_CONTENT</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="n">layoutParams</span><span class="p">.</span><span class="n">gravity</span> <span class="p">=</span> <span class="n">Gravity</span><span class="p">.</span><span class="n">CENTER</span>
</span></span><span class="line"><span class="cl">      <span class="n">layoutParams</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">â€‹</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// text çš„ click æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">click</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s2">&#34;hello world&#34;</span><span class="p">,</span> <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>é™¤äº† layout æ–¹æ³•ï¼Œå…¶ä»–çš„ä»£ç çœ‹èµ·æ¥æ˜¯ä¸æ˜¯è¿˜æŒºæœ‰æ„æ€çš„ï¼Ÿ</p>
<p>å½“ç„¶äº†ï¼Œæˆ‘è¿™åªæ˜¯æœ€ç®€å•çš„æƒ…å†µï¼Œå…¶å®æƒ³å®Œå…¨å¤„ç† XML å¸ƒå±€çš„æƒ…å†µè¿™è¿œè¿œä¸å¤Ÿï¼Œè¿˜æœ‰åŒ…æ‹¬å„ç§çˆ¶å¸ƒå±€(ConstraintLayout ç­‰)ã€‚</p>
<p>ä½†æ˜¯å·²ç»ä¸æ˜¯å¾ˆå…³å¿ƒå…·ä½“çš„å®ç°äº†ï¼Œå…·ä½“çš„å®ç°éƒ½æ˜¯è®¾è®¡æ€æƒ³çš„ä½“ç°ï¼ŒåŸç†å·²ç»ææ˜ç™½äº†ã€‚Anko è‚¯å®šæœ‰æ›´å¥½çš„è®¾è®¡ï¼Œä½†æ˜¯æºç æˆ‘å¹¶æ²¡æœ‰çœ‹ï¼Œä¹Ÿä¸æ˜¯å¾ˆæƒ³çœ‹äº†(ä¸œè¥¿å¤ªå¤šï¼Œå­¦ä¸è¿‡æ¥äº†ï¼Œè€Œä¸”æˆ‘è§‰å¾— Compose åº”è¯¥æ˜¯ä¸ªè¶‹åŠ¿å§ï¼Ÿæœ‰è¿™æ—¶é—´ç»§ç»­çœ‹ Compose äº†)</p>
<h2 id="æ›´å¤šçš„æ€è€ƒ">æ›´å¤šçš„æ€è€ƒ</h2>
<p>æ—¢ç„¶å¯ä»¥å®ç°è¿™ç§å¸ƒå±€çš„ DSLï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥å®Œå…¨æŠ›å¼€ Android çš„ ViewGroupï¼Œä½¿ç”¨åŸºç¡€çš„ YogaLayoutï¼Œç„¶åå›´ç»• Yoga æä¸€å¥— DSLï¼Œåƒå†™å‰ç«¯ Flexbox å¸ƒå±€ä¸€æ ·æ¥å†™ Android å¸ƒå±€ä»£ç å²‚ä¸æ˜¯æ›´æœ‰æ„æ€ï¼Ÿ</p>
<p>è€Œä¸”å› ä¸º Yoga çš„è®¡ç®—æ–¹å¼ï¼Œå¸ƒå±€å±‚çº§åŸºæœ¬åªæœ‰ä¸€å±‚ï¼Œç®€ç›´å®Œç¾ï¼Œä¹Ÿä¸ç”¨å¤„ç† Android å„ç§çˆ¶å¸ƒå±€å‚æ•°ï¼Œç»Ÿä¸€ä½¿ç”¨ Flexbox å‚æ•°ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ä¸»è¦æ˜¯ä¸Šæ‰‹ç»ƒäº†ä¸€ä¸‹ Kotlin Function ç›¸å…³çš„ä¸œè¥¿ã€‚
äº†è§£äº† Trailing Lambda å’Œ å‡½æ•°ä½œä¸ºæ„å»ºå™¨ çš„æ€æƒ³ã€‚</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2021-05-12</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/Android/">Android</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/%E6%96%AD%E6%9B%B4%E4%BA%86/" class="prev" rel="prev" title="æ–­æ›´äº†"><i class="fas fa-angle-left fa-fw"></i>æ–­æ›´äº†</a>
            <a href="/posts/%E5%86%8D%E7%9C%8B-Kotlin-Coroutines/" class="next" rel="next" title="å†çœ‹ Kotlin Coroutines">å†çœ‹ Kotlin Coroutines<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.105.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><script type="text/javascript" src="/lib/gitalk/gitalk.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/typeit/typeit.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":10},"comment":{"gitalk":{"admin":["PTrainbow"],"clientID":"2266a6b1be9e64aca6b8","clientSecret":"95a87d5d16492501b3629046e7d5689bb5f949bf","id":"2021-05-12T00:00:00Z","owner":"PTrainbow","repo":"PTrainbow.github.io","title":"å¥½ç©çš„ Kotlin"}},"data":{"id-1":"åŒ—é‚™å±±ä¹‹å…‰çš„ Blog","id-2":"åŒ—é‚™å±±ä¹‹å…‰çš„ Blog"},"search":{"algoliaAppID":"DY3IPG94HO","algoliaIndex":"blog","algoliaSearchKey":"e9b70bb1815b657ef5122006a8a499b6","highlightTag":"em","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"algolia"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
